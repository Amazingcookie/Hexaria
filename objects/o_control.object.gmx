<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>moved = 0 //Used in some modes to check if any block moved this step.
moves = ""
time = 0 //Just a dummy, is replaced by the room creation code
alarm[0] = 60
valid = false //Contains whether the current move is valid.
matches = 0 //Amount of total valid matches made
gemsmatched = 0 //Total amount of gems included in all valid matches

background_visible[1] = true; 
background_alpha[1] = 0.95; 
background_hspeed[0] = -0.1
alarm[11] = 1
draw_set_font(f_droidmono20)

if audio_is_playing(mus_menu) 
{
    audio_stop_all();
    
    startmusic();
}

if zenabled() {mantra = rndmmantra(); alarm[10] = seconds(30)}
else if ascentabled() {raisespeed = 20; alarm[9] = raisespeed}
else if tunnelabled() {movesleft = 20}
else if decenabled()  {fallspeed = seconds(1); alarm[8] = fallspeed}

if global.coloricon
background_alpha[0] = 0.5 //Colorblind thingy, more contrast

mouse_clear(mb_left); mouse_clear(mb_right); 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>amount</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>611</id>
        <kind>6</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>movenr</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>background_alpha[1] -= 0.05
if background_alpha[1] &lt;= 0
{
background_alpha[1] = 0;
}

if mouse_check_button_pressed(mb_any) || keyboard_check_pressed(vk_anykey) //Quickly skip the room transition
background_alpha[1] = 0

if background_alpha[1] &gt; 0
{alarm[11] = 1}
else
{if gj_privateset() {gj_datastore_update_global(global.leaderboardid+"_Begin","1","add")}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//We need a new mantra, so here we go!
mantra = rndmmantra()
alarm[10] = seconds(30)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Automatically raises the stack in Arise mode
with o_block {y -= 1}; with o_floor {y -= 1}
raisespeed = power(raisespeed,0.99975);

if raisespeed &lt; 1
raisespeed = 1

alarm[9] = raisespeed
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Special rules for Downpour mode
var maxy, xx, yy;
xx = -1; yy = -1

for(i=0;i!=21;i+=1)
{
 miny[i] = room_height
 with o_block 
  {if y &lt; other.miny[other.i] &amp;&amp; x == 286+(other.i*23) {other.miny[other.i] = y; }
 }
 if miny[i] &gt; yy {yy = miny[i]; xx = 286+(i*23);}
}

if !instance_exists(o_highscore)
instance_create(xx,-60,o_block)

//instance_create(286+(irandom(21))*23,-60,o_block) //Completely random

if fallspeed &gt; 10 {fallspeed = power(fallspeed,0.999);}
alarm[8] = round(fallspeed)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !zenabled() &amp;&amp; !ascentabled() &amp;&amp; !tunnelabled() &amp;&amp; !decenabled() {time -= 1}
if decenabled() &amp;&amp; !instance_exists(o_highscore) {time += 1} //A time counter showing how long you survived

if time &lt;= 5 &amp;&amp; global.sfx == true &amp;&amp; time &gt;= 0 &amp;&amp; !decenabled()
{audio_play_sound(sou_timewarn,0,false)}

if time != -1
{alarm[0] = 60}
else
{gameover()}

if ascentabled() || decenabled() &amp;&amp; global.sfx == true
{
 a = 1000
 with o_block {if y &lt;= o_control.a &amp;&amp; moved == false {o_control.a = y}}
  if a &lt;= 50 &amp;&amp; global.sfx
  {audio_play_sound(sou_warning,0,false)}
}

if tunnelabled()
{
if o_control.movesleft == 0
{o_control.movesleft = -1; gameover();}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if o_pause.paused == true
{
    if alarm[0] &gt;= 1 {alarm[0] += 1}
    if alarm[8] &gt;= 1 {alarm[8] += 1}
    if alarm[9] &gt;= 1 {alarm[9] += 1}
    background_x[0] -= background_hspeed[0]
}
else
{
    if global.bgwrap
    {
        if background_x[0] &lt;= -background_width[0] + room_width + 312 {background_hspeed[0] = 1}
        if background_x[0] &gt;= 0 {background_hspeed[0] = -1}
    }
}

o_control.moved = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>amount</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>2</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>validatepattern</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="7" enumb="62">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if zenabled()
{
var resultid = gj_result_id()

if(resultid==request[0]) //If we just recieved the local score
 {
    if gj_result_status()
    {} else
    {
     if gj_result_error() == "No item with that key could be found."
     {request[2] = gj_datastore_set_global("Zen_"+os_get_region(),"0");}
    }
 }
}

gj_result_clear()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_color(c_white); draw_set_halign(fa_right)

//Draw fancy time display
draw_set_halign(fa_center)
draw_set_font(f_mysterions48)
if time &gt;= 0 &amp;&amp; !zenabled() &amp;&amp; !ascentabled() &amp;&amp; !tunnelabled()
{
var a,b;
a = floor(time/60)
b = a*60
if time-b &lt;= 9
draw_text(90+56,506,string(a)+":0"+string(time-b))
else
draw_text(90+56,506,string(a)+":"+string(time-b))
}

//Draw fancy score display
draw_set_font(f_droidmono20)
var c, d;
d = ""
c = string_length(string(score))
for(i=0;i!=7-c;i+=1)
{d += "0"}
draw_text(90+56,560,d+string(score))

draw_line(90+56-string_width(d+string(score))/2,565,90+56+string_width(d+string(score))/2,565)

draw_set_font(f_small)

//If zen mode is currently on, then we draw a mantra on-screen!
draw_set_halign(fa_center); draw_set_valign(fa_bottom)
if zenabled() &amp;&amp; instance_number(o_tutorial) == 0
{
 if alarm[10] &lt;= 100
 {
  draw_set_alpha(alarm[10]/100)
  draw_text_ext(90+56,565+alarm[10]-100,mantra,-1,120); draw_set_alpha(1)
 }
 if alarm[10] &gt;= 1700
 {
  draw_set_alpha(1-((alarm[10]-1700)/100))
  draw_text_ext(90+56,565-(alarm[10]-1700),mantra,-1,120); draw_set_alpha(1)
 }
 if alarm[10] &gt; 100 &amp;&amp; alarm[10] &lt; 1700
  draw_text_ext(90+56,565,mantra,-1,120)
 
}

draw_set_halign(fa_left); draw_set_valign(fa_top)

draw_set_font(f_mysterions48); draw_set_halign(fa_center);

if ascentabled()                  {draw_text_ext(90+56,506,"L"+string(round(raisespeed)),-1,120)}
if tunnelabled() &amp;&amp; movesleft &gt; 0 {draw_text_ext(90+56,506,+string(movesleft)+"X",-1,120)}

draw_set_font(f_small); draw_set_halign(fa_left);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="120">
      <action>
        <libid>1</libid>
        <id>802</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_snapshot</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>2</kind>
            <string>hexariasnapshot.png</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="115">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>togglefullscreen</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>amount</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>2</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>validatepattern</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
